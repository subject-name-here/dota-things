# dota-things

The plan:
1) "scrapper.py - парсим dotabuff.com. Матчей с параметром skill_bracket=very_high_skill достаточно много и меньше мусора, по таймингу в 15 минут записываем в текстовый лог match_id. Если снять требования skill_bracket, то тайминг можно снизить до 3-5 минут и увеличить число итераций.  Пример работы в файле match_id.txt" - цитата и scrapper.py принадлежат Ярославу. Еще там в ссылке указано, что мы ищем только матчи 1x1 с героем Shadow Fiend, но при желании это можно менять (скорее всего, придется увеличить время работы, т.к. матчей с другими героями значительно меньше). 

В параметр командной строки можно передать количество часов работы (по умолчанию 1, что слишком мало).

2) С помощью valvePython/dota2 (https://github.com/ValvePython/dota2) и ранее сгенерированных id формируем ссылки на скачивание реплеев, заодно проверяем реплеи на то, что они нам подходят (нужно, чтобы Shadow Fiend там выиграл). Сохраняем ссылки в файл match_links.txt. 

WARNING: требует id, пароль и код, который приходит на e-mail. Вдобавок к этому, можно запрашивать не более 100 ссылок, поэтому просто оставить все это на два дня добывать реплеи не получится.

2.5) Скачиваем архивы по ссылкам из match_links.txt, распаковываем их в папку replays. (Большинство ссылок по какой-то причине невалидны :(, поэтому репеев сильно меньше, чем добытых ранее id.)

Верхние три пункта можно выполнить, запустив script.sh. Но оно уничтожит все промежуточные результаты, поэтому если хотите посмотреть на ссылки или на архивы, запускайте программы по одной. В параметр можно передать количество часов работы для scrapper.py.

3) Используя clarity, парсим скачанные реплеи: на каждый тик (единица времени в реплее) вытаскиваем состояния (данные об игроке, его противнике, крипах, башне), а также о действиях нашего игрока. Сохраняем состояния и действия в воображаемую базу данных (пока что - в файлик output.txt).
